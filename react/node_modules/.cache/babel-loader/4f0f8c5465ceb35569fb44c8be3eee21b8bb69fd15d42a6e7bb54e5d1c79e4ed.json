{"ast":null,"code":"var _jsxFileName = \"/Users/ziheng/UIUC Courses/SP24/CS411-Vocabuddy/react/src/components/Study/Study.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Card, CardContent, Grid, Collapse } from '@mui/material';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = 'http://35.208.70.236/';\nfunction Study() {\n  _s();\n  const [words, setWords] = useState([]);\n  const [wordDetails, setWordDetails] = useState({});\n  const [user, setUser] = useState(null);\n  const [activeTab, setActiveTab] = useState(0); // 0 for GRE, 1 for TOEFL\n\n  useEffect(() => {\n    const rawData = sessionStorage.getItem('user');\n    if (rawData) {\n      const savedData = JSON.parse(rawData);\n      setUser(savedData[0]);\n    }\n  }, []);\n  useEffect(() => {\n    if (user) {\n      fetchWords();\n    }\n  }, [activeTab, user]);\n  const fetchWords = async () => {\n    const TestId = activeTab === 0 ? 0 : 3;\n    try {\n      const response = await axios.get('/api/Study', {\n        params: {\n          Email: user.Email,\n          TestId\n        }\n      });\n      setWords(response.data.map(word => ({\n        ...word,\n        Learn: word.Learned !== undefined ? word.Learned : false\n      })));\n    } catch (error) {\n      console.error('Failed to fetch words:', error);\n      setWords([]);\n    }\n  };\n  const handleLearnClick = word => {\n    // Existing implementation...\n  };\n  const handleDetailsClick = async word => {\n    const detailKey = `${word.WordId}-${word.TestId}`;\n    if (wordDetails[detailKey]) {\n      const newDetails = {\n        ...wordDetails\n      };\n      delete newDetails[detailKey];\n      setWordDetails(newDetails);\n      return;\n    }\n    try {\n      const response = await axios.get('/api/Word', {\n        params: {\n          WordId: word.WordId,\n          TestId: activeTab === 0 ? 0 : 3\n        }\n      });\n      setWordDetails(prev => ({\n        ...prev,\n        [detailKey]: response.data[0]\n      }));\n    } catch (error) {\n      console.error('Failed to fetch word details:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      width: '90%',\n      overflowX: 'hidden',\n      mx: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 1,\n      sx: {\n        justifyContent: 'center',\n        margin: 'auto',\n        mt: 1\n      },\n      children: words.map(word => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            minWidth: 275,\n            maxWidth: 400,\n            m: 1,\n            transition: '0.3s',\n            boxShadow: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(Collapse, {\n            in: !!wordDetails[`${word.WordId}-${word.TestId}`],\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: wordDetails[`${word.WordId}-${word.TestId}`] && /*#__PURE__*/_jsxDEV(Box, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, `${word.WordId}-${word.TestId}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(Study, \"r8ZDB9reEWa0RXsETfNzxpbAM0Y=\");\n_c = Study;\nexport default Study;\nvar _c;\n$RefreshReg$(_c, \"Study\");","map":{"version":3,"names":["React","useState","useEffect","Box","Card","CardContent","Grid","Collapse","axios","jsxDEV","_jsxDEV","defaults","baseURL","Study","_s","words","setWords","wordDetails","setWordDetails","user","setUser","activeTab","setActiveTab","rawData","sessionStorage","getItem","savedData","JSON","parse","fetchWords","TestId","response","get","params","Email","data","map","word","Learn","Learned","undefined","error","console","handleLearnClick","handleDetailsClick","detailKey","WordId","newDetails","prev","sx","width","overflowX","mx","children","container","spacing","justifyContent","margin","mt","item","xs","sm","md","minWidth","maxWidth","m","transition","boxShadow","in","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ziheng/UIUC Courses/SP24/CS411-Vocabuddy/react/src/components/Study/Study.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Box, Card, CardContent, Typography, Chip, Button, Grid, Tab, Tabs, Collapse, CardActions } from '@mui/material';\nimport axios from 'axios';\nimport { formatDistanceToNow, parseISO } from 'date-fns';\nimport { word_progress, word } from '../../Types';\n\naxios.defaults.baseURL = 'http://35.208.70.236/';\n\nfunction Study() {\n  const [words, setWords] = useState<word_progress[]>([]);\n  const [wordDetails, setWordDetails] = useState<{ [key: string]: word }>({});\n  const [user, setUser] = useState<any>(null);\n  const [activeTab, setActiveTab] = useState(0);  // 0 for GRE, 1 for TOEFL\n\n  useEffect(() => {\n    const rawData = sessionStorage.getItem('user');\n    if (rawData) {\n      const savedData = JSON.parse(rawData);\n      setUser(savedData[0]);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      fetchWords();\n    }\n  }, [activeTab, user]);\n\n  const fetchWords = async () => {\n    const TestId = activeTab === 0 ? 0 : 3;\n    try {\n      const response = await axios.get('/api/Study', { params: { Email: user.Email, TestId } });\n      setWords(response.data.map(word => ({ ...word, Learn: word.Learned !== undefined ? word.Learned : false })));\n    } catch (error) {\n      console.error('Failed to fetch words:', error);\n      setWords([]);\n    }\n  };\n\n  const handleLearnClick = (word: word_progress) => {\n    // Existing implementation...\n  };\n\n  const handleDetailsClick = async (word: word_progress) => {\n    const detailKey = `${word.WordId}-${word.TestId}`;\n    if (wordDetails[detailKey]) {\n      const newDetails = { ...wordDetails };\n      delete newDetails[detailKey];\n      setWordDetails(newDetails);\n      return;\n    }\n\n    try {\n      const response = await axios.get('/api/Word', { params: { WordId: word.WordId, TestId: activeTab === 0 ? 0 : 3 } });\n      setWordDetails(prev => ({ ...prev, [detailKey]: response.data[0] }));\n    } catch (error) {\n      console.error('Failed to fetch word details:', error);\n    }\n  };\n\n  return (\n    <Box sx={{ width: '90%', overflowX: 'hidden', mx: 'auto' }}>\n      {/* Existing UI components */}\n      <Grid container spacing={1} sx={{ justifyContent: 'center', margin: 'auto', mt: 1 }}>\n        {words.map((word) => (\n          <Grid item key={`${word.WordId}-${word.TestId}`} xs={12} sm={6} md={4}>\n            <Card sx={{ minWidth: 275, maxWidth: 400, m: 1, transition: '0.3s', boxShadow: 3 }}>\n              {/* Existing CardContent and CardActions */}\n              <Collapse in={!!wordDetails[`${word.WordId}-${word.TestId}`]}>\n                <CardContent>\n                  {wordDetails[`${word.WordId}-${word.TestId}`] && (\n                    <Box>\n                      {/* Display details */}\n                    </Box>\n                  )}\n                </CardContent>\n              </Collapse>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n    </Box>\n  );\n}\n\nexport default Study;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,GAAG,EAAEC,IAAI,EAAEC,WAAW,EAA4BC,IAAI,EAAaC,QAAQ,QAAqB,eAAe;AACxH,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAI1BF,KAAK,CAACG,QAAQ,CAACC,OAAO,GAAG,uBAAuB;AAEhD,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EACf,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAkB,EAAE,CAAC;EACvD,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAA0B,CAAC,CAAC,CAAC;EAC3E,MAAM,CAACkB,IAAI,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAM,IAAI,CAAC;EAC3C,MAAM,CAACoB,SAAS,EAAEC,YAAY,CAAC,GAAGrB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;;EAEhDC,SAAS,CAAC,MAAM;IACd,MAAMqB,OAAO,GAAGC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;IAC9C,IAAIF,OAAO,EAAE;MACX,MAAMG,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;MACrCH,OAAO,CAACM,SAAS,CAAC,CAAC,CAAC,CAAC;IACvB;EACF,CAAC,EAAE,EAAE,CAAC;EAENxB,SAAS,CAAC,MAAM;IACd,IAAIiB,IAAI,EAAE;MACRU,UAAU,CAAC,CAAC;IACd;EACF,CAAC,EAAE,CAACR,SAAS,EAAEF,IAAI,CAAC,CAAC;EAErB,MAAMU,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMC,MAAM,GAAGT,SAAS,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;IACtC,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAAC,YAAY,EAAE;QAAEC,MAAM,EAAE;UAAEC,KAAK,EAAEf,IAAI,CAACe,KAAK;UAAEJ;QAAO;MAAE,CAAC,CAAC;MACzFd,QAAQ,CAACe,QAAQ,CAACI,IAAI,CAACC,GAAG,CAACC,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAEC,KAAK,EAAED,IAAI,CAACE,OAAO,KAAKC,SAAS,GAAGH,IAAI,CAACE,OAAO,GAAG;MAAM,CAAC,CAAC,CAAC,CAAC;IAC9G,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CzB,QAAQ,CAAC,EAAE,CAAC;IACd;EACF,CAAC;EAED,MAAM2B,gBAAgB,GAAIN,IAAmB,IAAK;IAChD;EAAA,CACD;EAED,MAAMO,kBAAkB,GAAG,MAAOP,IAAmB,IAAK;IACxD,MAAMQ,SAAS,GAAI,GAAER,IAAI,CAACS,MAAO,IAAGT,IAAI,CAACP,MAAO,EAAC;IACjD,IAAIb,WAAW,CAAC4B,SAAS,CAAC,EAAE;MAC1B,MAAME,UAAU,GAAG;QAAE,GAAG9B;MAAY,CAAC;MACrC,OAAO8B,UAAU,CAACF,SAAS,CAAC;MAC5B3B,cAAc,CAAC6B,UAAU,CAAC;MAC1B;IACF;IAEA,IAAI;MACF,MAAMhB,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAAC,WAAW,EAAE;QAAEC,MAAM,EAAE;UAAEa,MAAM,EAAET,IAAI,CAACS,MAAM;UAAEhB,MAAM,EAAET,SAAS,KAAK,CAAC,GAAG,CAAC,GAAG;QAAE;MAAE,CAAC,CAAC;MACnHH,cAAc,CAAC8B,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,CAACH,SAAS,GAAGd,QAAQ,CAACI,IAAI,CAAC,CAAC;MAAE,CAAC,CAAC,CAAC;IACtE,CAAC,CAAC,OAAOM,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACvD;EACF,CAAC;EAED,oBACE/B,OAAA,CAACP,GAAG;IAAC8C,EAAE,EAAE;MAAEC,KAAK,EAAE,KAAK;MAAEC,SAAS,EAAE,QAAQ;MAAEC,EAAE,EAAE;IAAO,CAAE;IAAAC,QAAA,eAEzD3C,OAAA,CAACJ,IAAI;MAACgD,SAAS;MAACC,OAAO,EAAE,CAAE;MAACN,EAAE,EAAE;QAAEO,cAAc,EAAE,QAAQ;QAAEC,MAAM,EAAE,MAAM;QAAEC,EAAE,EAAE;MAAE,CAAE;MAAAL,QAAA,EACjFtC,KAAK,CAACqB,GAAG,CAAEC,IAAI,iBACd3B,OAAA,CAACJ,IAAI;QAACqD,IAAI;QAAuCC,EAAE,EAAE,EAAG;QAACC,EAAE,EAAE,CAAE;QAACC,EAAE,EAAE,CAAE;QAAAT,QAAA,eACpE3C,OAAA,CAACN,IAAI;UAAC6C,EAAE,EAAE;YAAEc,QAAQ,EAAE,GAAG;YAAEC,QAAQ,EAAE,GAAG;YAAEC,CAAC,EAAE,CAAC;YAAEC,UAAU,EAAE,MAAM;YAAEC,SAAS,EAAE;UAAE,CAAE;UAAAd,QAAA,eAEjF3C,OAAA,CAACH,QAAQ;YAAC6D,EAAE,EAAE,CAAC,CAACnD,WAAW,CAAE,GAAEoB,IAAI,CAACS,MAAO,IAAGT,IAAI,CAACP,MAAO,EAAC,CAAE;YAAAuB,QAAA,eAC3D3C,OAAA,CAACL,WAAW;cAAAgD,QAAA,EACTpC,WAAW,CAAE,GAAEoB,IAAI,CAACS,MAAO,IAAGT,IAAI,CAACP,MAAO,EAAC,CAAC,iBAC3CpB,OAAA,CAACP,GAAG;gBAAAkE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEC;YACN;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACU;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP;MAAC,GAZQ,GAAEnC,IAAI,CAACS,MAAO,IAAGT,IAAI,CAACP,MAAO,EAAC;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAazC,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV;AAAC1D,EAAA,CA3EQD,KAAK;AAAA4D,EAAA,GAAL5D,KAAK;AA6Ed,eAAeA,KAAK;AAAC,IAAA4D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}